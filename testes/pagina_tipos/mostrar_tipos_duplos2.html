<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualizador de Tipos</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #f4f4f9;
            color: #333;
            padding: 20px;
        }
        h1, #status {
            text-align: center;
            color: #1a1a1a;
        }
        #status {
            font-size: 1.2em;
            font-style: italic;
            margin-bottom: 30px;
        }
        
        /* Estilo do container do filtro */
        .filter-container {
            max-width: 800px;
            margin: 0 auto 30px auto;
        }

        /* Estilo do campo de input do filtro */
        #typeFilterInput {
            width: 100%;
            padding: 12px 15px;
            font-size: 1.1em;
            border-radius: 6px;
            border: 1px solid #ddd;
            box-sizing: border-box;
        }

        #results-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        .type-card {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            padding: 15px;
            transition: transform 0.2s;
            display: flex;
            flex-direction: column;
        }
        .type-card:hover {
            transform: translateY(-5px);
        }
        .card-title {
            font-size: 1.5em;
            font-weight: bold;
            text-align: center;
            margin-bottom: 15px;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            min-height: 48px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }
        .result-category {
            margin-bottom: 15px;
        }
        .result-category h3 {
            font-size: 1.1em;
            margin-bottom: 8px;
            color: #555;
        }
        .type-tag {
            display: inline-block;
            padding: 5px 10px;
            margin: 3px;
            border-radius: 4px;
            color: white;
            font-weight: bold;
            font-size: 0.9em;
        }
        .multiplier {
            font-size: 0.8em;
            opacity: 0.9;
        }
        /* Cores dos Tipos */
        .A√ßo { background-color: #B8B8D0; color: #333; }
        .√Ågua { background-color: #6890F0; }
        .Drag√£o { background-color: #7038F8; }
        .El√©trico { background-color: #F8D030; color: #333; }
        .Fada { background-color: #EE99AC; }
        .Fantasma { background-color: #705898; }
        .Fogo { background-color: #F08030; }
        .Gelo { background-color: #98D8D8; color: #333; }
        .Inseto { background-color: #A8B820; }
        .Lutador { background-color: #C03028; }
        .Normal { background-color: #A8A878; }
        .Pedra { background-color: #B8A038; }
        .Planta { background-color: #78C850; }
        .Ps√≠quico { background-color: #F85888; }
        .Sombrio { background-color: #705848; }
        .Terrestre { background-color: #E0C068; color: #333; }
        .Venenoso { background-color: #A040A0; }
        .Voador { background-color: #A890F0; }
    </style>
</head>
<body>

    <h1>Tabela Completa de Intera√ß√µes Defensivas</h1>
    
    <div class="filter-container">
        <input type="text" id="typeFilterInput" placeholder="üîç Filtrar por tipo (ex: Fogo, A√ßo...)">
    </div>
    
    <p id="status">Carregando dados...</p>
    <div id="results-container"></div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const resultsContainer = document.getElementById('results-container');
            const statusDiv = document.getElementById('status');
            const filterInput = document.getElementById('typeFilterInput');
            
            // Este √© o URL que voc√™ queria usar na sua primeira p√°gina de visualiza√ß√£o
            const jsonUrl = 'https://raw.githubusercontent.com/nowadraco/blogger-poke-dragon-shadow/main/json/tipos_poke.json';

            // Vari√°vel para guardar todos os dados originais
            let allCombinationsData = [];

            async function fetchDataAndDisplay() {
                try {
                    const response = await fetch(jsonUrl);
                    if (!response.ok) {
                        throw new Error(`Erro na rede: ${response.statusText}`);
                    }
                    allCombinationsData = await response.json(); 

                    statusDiv.style.display = 'none';
                    displayAllCards(allCombinationsData);

                } catch (error) {
                    statusDiv.textContent = `Ocorreu um erro ao carregar os dados: ${error.message}`;
                    console.error('Erro:', error);
                }
            }
            
            function displayAllCards(data) {
                resultsContainer.innerHTML = ''; 

                data.forEach(combination => {
                    // Esta verifica√ß√£o agora funciona, pois o JSON correto tem a chave "tipos" (plural)
                    if (!combination || !combination.tipos || combination.tipos.length === 0) {
                        console.warn("Item inv√°lido ou sem 'tipos' encontrado no JSON:", combination);
                        return;
                    }

                    const card = document.createElement('div');
                    card.className = 'type-card';
                    
                    const titleHTML = combination.tipos.map(tipo => 
                        `<span class="type-tag ${tipo}">${tipo}</span>`
                    ).join(' ');
                    
                    const title = `<div class="card-title">${titleHTML}</div>`;

                    const defense = combination.defesa;
                    let content = '';

                    content += createCategoryHTML('Fraquezas', defense.fraqueza);
                    content += createCategoryHTML('Resist√™ncias', defense.resistencia);
                    
                    if (defense.imunidade && defense.imunidade.length > 0) {
                         content += createCategoryHTML('Imunidades', { '0x': defense.imunidade });
                    }
                    
                    if (defense.normal) {
                        content += createCategoryHTML('Dano Neutro', defense.normal);
                    }
                    
                    card.innerHTML = title + content;
                    resultsContainer.appendChild(card);
                });
            }
            
            function filterTypes() {
                const normalize = str => str.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                const filterText = normalize(filterInput.value);

                const filteredData = allCombinationsData.filter(combination => {
                    const combinationTypesText = normalize(combination.tipos.join(' '));
                    return combinationTypesText.includes(filterText);
                });

                displayAllCards(filteredData);
            }

            function createCategoryHTML(title, categoryData) {
                if (!categoryData || Object.keys(categoryData).length === 0) return '';
                let html = `<div class="result-category"><h3>${title}</h3>`;
                
                const sortedMultipliers = Object.keys(categoryData).sort((a, b) => {
                    return title.startsWith('Fraquezas') ? parseFloat(b) - parseFloat(a) : parseFloat(a) - parseFloat(b);
                });

                for (const multiplier of sortedMultipliers) {
                    const types = categoryData[multiplier];
                    if (types && types.length > 0) {
                        types.sort().forEach(type => {
                            html += `<span class="type-tag ${type}">${type} <span class="multiplier">(${multiplier})</span></span>`;
                        });
                    }
                }
                html += '</div>';
                return html;
            }

            filterInput.addEventListener('input', filterTypes);
            fetchDataAndDisplay();
        });
    </script>
</body>
</html>